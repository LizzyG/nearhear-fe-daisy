@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Third-party brand colors
   ============================================ */
:root {
  --color-spotify: #1db954;
  --color-spotify-hover: #1ed760;
  --color-bandcamp: #1da0c3;
  --color-instagram: #e4405f;
}

@layer base {
  html {
    @apply font-sans;
  }

  body {
    @apply min-h-screen bg-base-100 text-base-content;
  }

  a {
    @apply text-primary no-underline transition-colors duration-150;
  }

  a:hover,
  a:focus-visible {
    @apply text-secondary;
  }
}

@layer components {
  /* Fix DaisyUI modal with native dialog API */
  dialog.modal {
    /* DaisyUI sets these to hide the modal - reset for native dialog */
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
    /* Reset browser defaults that interfere with centering */
    margin: 0;
    padding: 0;
    border: none;
    max-width: 100vw;
    max-height: 100vh;
  }

  dialog.modal[open] {
    /* Make visible */
    display: flex !important;
    visibility: visible !important;
    pointer-events: auto !important;
    opacity: 1 !important;
    /* Center the modal */
    position: fixed;
    inset: 0;
    justify-content: center;
    align-items: center;
  }

  /* The modal-box also needs to be visible */
  dialog.modal[open] > .modal-box {
    opacity: 1 !important;
    transform: scale(1) !important;
  }

  /* Ensure modal backdrop works with native dialog */
  dialog.modal::backdrop {
    background-color: rgba(0, 0, 0, 0.5);
  }

  /* Hide today highlight in calendar */
  calendar-date::part(day),
  calendar-date button[part*='today'],
  calendar-date button.today {
    background-color: transparent;
    color: inherit;
  }

  /* More specific selector for today button */
  calendar-date button[aria-current='date'] {
    background-color: transparent;
    color: inherit;
  }

  /* ============================================
     Checkbox - consistent styling across app
     ============================================ */

  /* Base checkbox style - matches form input aesthetics */
  .checkbox-app {
    @apply h-5 w-5 cursor-pointer appearance-none rounded-lg border-2 transition-all;
    border-color: color-mix(in oklch, var(--color-primary) 40%, transparent);
    background-color: transparent;
  }

  .checkbox-app:hover {
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
  }

  .checkbox-app:checked {
    @apply border-primary bg-primary;
    /* White checkmark via SVG background */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
    background-size: 14px 14px;
    background-position: center;
    background-repeat: no-repeat;
  }

  .checkbox-app:focus {
    @apply outline-none ring-2;
    --tw-ring-color: color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  .checkbox-app:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* Checkbox label wrapper */
  .checkbox-app-label {
    @apply inline-flex cursor-pointer items-center gap-2 text-sm;
  }

  .app-city-note {
    @apply mt-3 text-sm;
    color: color-mix(in oklch, var(--color-base-content) 60%, transparent);
  }

  /* Standard action buttons - outline variant */
  .btn-action-outline {
    @apply inline-flex items-center justify-center rounded-lg border-2 px-4 py-2 text-sm font-medium transition-colors;
    @apply bg-transparent text-base-content;
    border-color: color-mix(in oklch, var(--color-primary) 40%, transparent);
  }

  .btn-action-outline:hover {
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
    @apply bg-base-200;
  }

  /* Standard action buttons - solid variant */
  .btn-action-solid {
    @apply inline-flex items-center justify-center rounded-lg border-2 px-4 py-2 text-sm font-medium transition-colors;
    @apply bg-primary text-primary-content;
    /* reduce competing border emphasis and add subtle elevation */
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
    box-shadow: 0 1px 0 color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  .btn-action-solid:hover {
    opacity: 0.98;
    transform: translateY(-1px);
  }

  /* Toggle button - inactive state */
  .btn-toggle {
    @apply rounded-lg px-3 py-1.5 text-sm font-medium transition-colors;
    @apply border border-base-300 bg-base-100 text-base-content;
  }

  .btn-toggle:hover {
    @apply border-primary;
  }

  /* Toggle button - active state */
  .btn-toggle-active {
    @apply rounded-lg px-3 py-1.5 text-sm font-medium transition-colors;
    @apply bg-primary text-primary-content;
  }

  /* Alternating row background - light primary tint */
  .bg-row-alt {
    background-color: color-mix(in oklch, var(--color-primary) 12%, white);
  }

  /* Standard input styling - visible with primary accent */
  .input-primary {
    @apply w-full rounded-lg border-2 bg-base-100 px-4 py-2 text-base-content transition-all;
    border-color: color-mix(in oklch, var(--color-primary) 40%, transparent);
  }

  .input-primary::placeholder {
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
  }

  .input-primary:hover {
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
  }

  .input-primary:focus {
    @apply border-primary outline-none ring-1;
    --tw-ring-color: color-mix(in oklch, var(--color-primary) 12%, transparent);
  }

  .input-primary:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* Select dropdown with same styling */
  .select-primary {
    @apply w-full cursor-pointer rounded-lg border-2 bg-base-100 px-4 py-2 text-base-content transition-all;
    border-color: color-mix(in oklch, var(--color-primary) 40%, transparent);
  }

  .select-primary:hover {
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
  }

  .select-primary:focus {
    @apply border-primary outline-none ring-2;
    --tw-ring-color: color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  .select-primary:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* Small input variant */
  .input-primary-sm {
    @apply w-full rounded-lg border-2 bg-base-100 px-3 py-1.5 text-sm text-base-content transition-all;
    border-color: color-mix(in oklch, var(--color-primary) 40%, transparent);
  }

  .input-primary-sm::placeholder {
    color: color-mix(in oklch, var(--color-base-content) 50%, transparent);
  }

  .input-primary-sm:hover {
    border-color: color-mix(in oklch, var(--color-primary) 60%, transparent);
  }

  .input-primary-sm:focus {
    @apply border-primary outline-none ring-2;
    --tw-ring-color: color-mix(in oklch, var(--color-primary) 20%, transparent);
  }

  .input-primary-sm:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  .input-primary-sm.input-error {
    @apply border-error;
  }

  /* ============================================
     Disabled states for custom buttons
     ============================================ */
  .btn-action-outline:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  .btn-action-solid:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  .btn-toggle:disabled,
  .btn-toggle-active:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* ============================================
     Button variants
     ============================================ */

  /* Error/destructive outline button variant */
  .btn-action-outline-error {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors;
    @apply border-2 border-error bg-transparent text-error;
  }

  .btn-action-outline-error:hover {
    background-color: color-mix(in oklch, var(--color-error) 10%, transparent);
  }

  .btn-action-outline-error:disabled {
    @apply cursor-not-allowed opacity-50;
  }

  /* ============================================
     Content container utilities
     ============================================ */

  /* Centered content container - narrow (forms, profiles) */
  .container-narrow {
    @apply mx-auto max-w-xl;
  }

  /* Centered content container - standard (most pages) */
  .container-standard {
    @apply mx-auto max-w-2xl;
  }

  /* Centered content container - wide (articles, FAQs) */
  .container-wide {
    @apply mx-auto max-w-3xl;
  }

  /* ============================================
     Typography scale
     ============================================ */
  .heading-page {
    @apply text-3xl font-semibold text-base-content md:text-4xl;
  }

  .heading-section {
    @apply text-xl font-bold text-base-content;
  }

  .heading-card {
    @apply text-lg font-semibold text-base-content;
  }

  .heading-subsection {
    @apply text-base font-semibold text-base-content;
  }

  /* ============================================
     Link variants
     ============================================ */
  .link-primary {
    @apply text-primary hover:underline;
  }

  .link-subtle {
    @apply transition-colors hover:text-base-content;
    color: color-mix(in oklch, var(--color-base-content) 70%, transparent);
  }

  /* ============================================
     Third-party brand utilities
     ============================================ */

  /* Spotify */
  .text-spotify {
    color: var(--color-spotify);
  }

  .bg-spotify {
    background-color: var(--color-spotify);
  }

  .hover\:bg-spotify-hover:hover {
    background-color: var(--color-spotify-hover);
  }

  .border-spotify {
    border-color: var(--color-spotify);
  }

  .border-spotify\/30 {
    border-color: color-mix(in srgb, var(--color-spotify) 30%, transparent);
  }

  .bg-spotify\/5 {
    background-color: color-mix(in srgb, var(--color-spotify) 5%, transparent);
  }

  .bg-spotify\/10 {
    background-color: color-mix(in srgb, var(--color-spotify) 10%, transparent);
  }

  .bg-spotify\/20 {
    background-color: color-mix(in srgb, var(--color-spotify) 20%, transparent);
  }

  .hover\:bg-spotify\/10:hover {
    background-color: color-mix(in srgb, var(--color-spotify) 10%, transparent);
  }

  /* Bandcamp */
  .text-bandcamp {
    color: var(--color-bandcamp);
  }

  .bg-bandcamp {
    background-color: var(--color-bandcamp);
  }

  /* Instagram */
  .text-instagram {
    color: var(--color-instagram);
  }

  .bg-instagram {
    background-color: var(--color-instagram);
  }

  /* ============================================
     Audio player styling
     ============================================ */
  .audio-player {
    @apply rounded-lg;
  }

  .audio-player::-webkit-media-controls-panel {
    background-color: oklch(var(--b2));
  }
}
